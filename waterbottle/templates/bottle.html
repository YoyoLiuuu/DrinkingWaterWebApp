{% load static %}

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Water Website</title>
  <link rel="stylesheet" type="text/css" href="{% static 'css/bottle.css' %}"/>
  {% load static %}
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-messaging.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-analytics.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="module" src="{% static 'js/message.js' %}">
    </script>
</head>
  <style>
    body{
        background-color: rgb(149, 218, 246);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    p1{
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        text-align: center;
        font-size: 24px;
    }
    p2{
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-size: 18px;
    }

  .center_box{
      display: block;
      margin-left: auto;
      margin-right: auto;
      width: 15%;
      text-align: center;
      background-color: white;
      border: 2px solid white;
      border-radius: 5px;
      border-width: 10px;
  }
    </style>
<header>
  <div id="goaltracker"> 
    <p1>Goal Tracker</p1>
  </div>
</header>
<body>
  <script src="{% static 'js/.js' %}" ></script>
</body>
  <br>
<body>
  <p2>Daily Water Intake:</p2>
   <div id="datecontainer">
    Date: 7/18
  </div>
  {% if waterbottle == 0 %}
    <img src="{% static "bottle/media/0.png" %}" alt="waterbottle"/> 
  {% elif waterbottle == 1 %}
    <img src="{% static "bottle/media/1.png" %}" alt="waterbottle"/> 
  {% elif waterbottle == 2 %}
    <img src="{% static "bottle/media/2.png" %}" alt="waterbottle"/> 
  {% elif waterbottle == 3 %}
    <img src="{% static "bottle/media/3.png" %}" alt="waterbottle"/> 
  {% elif waterbottle == 4 %}
    <img src="{% static "bottle/media/4.png" %}" alt="waterbottle"/> 
  {% elif waterbottle == 5 %}
    <img src="{% static "bottle/media/5.png" %}" alt="waterbottle"/> 
  {% elif waterbottle == 6 %}
    <img src="{% static "bottle/media/6.png" %}" alt="waterbottle"/> 
  {% elif waterbottle == 7 %}
    <img src="{% static "bottle/media/7.png" %}" alt="waterbottle"/> 
  {%endif%}

  <br>
  <div id="informationcontainer">
    Information:
  </div>
  <br>
  <div id="streakscontainer">
    Streaks:
  </div>
</body>
  <br>

  <br>
  <body>
  <p2> Weekly Water Consumption:</p2>
  </body>
  <br>
  
  <br>
<head>
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
</style>
</head>
  <body>
  <table class="center">
  <tr>
    <th id="w0">Sunday</th>
    <th id="w1">Monday </th>
    <th id="w2">Tuesday</th>
    <th id="w3">Wednesday</th>
    <th id="w4">Thursday</th>
    <th id="w5">Friday</th>
    <th id="w6">Saturday</th>
    
  </tr>
  <tr>
    <td id="d0">-</td>
    <td id="d1">-</td>
    <td id="d2">-</td>
    <td id="d3">-</td>
    <td id="d4">-</td>
    <td id="d5">-</td>
    <td id="d6">-</td>
    
  </tr>
</table>
<script type="text/javascript" > 
// <script src="{% static 'js/bottle.js' %}" > 
  var data= JSON.parse('{{ tracking | safe }}')
  

  // Check today is which date of the week  0-6 for sunday to saturday
  const d = new Date();

  for (let i=0; i<=d.getDay(); i++){
    const date = new Date();
    date.setDate(date.getDate()-i);
    var current_date = date.getFullYear()+"-"+("0"+(date.getMonth()+1)).slice(-2)+"-"+ ("0"+date.getDate()).slice(-2);
    

    // Add the exact date to each day of the week
    let str0 = "w"+ date.getDay().toString();
    let day = document.getElementById(str0);
    const br = document.createElement("br");
    const node = document.createTextNode(current_date);
    day.appendChild(br);
    day.appendChild(node);

    // Data for each day
    let str = "d"+ date.getDay().toString();
    let d = document.getElementById(str);

    // Change the data according to the record
    if (data[current_date]) {
      var percent = (data[current_date]/8)*100
      d.innerHTML = percent.toString() + "%";
    } 
  }

  for (let j=1; j < (7-d.getDay()); j++ ) {
    const date = new Date();
    date.setDate(date.getDate()+j);
    var current_date = date.getFullYear()+"-"+("0"+(date.getMonth()+1)).slice(-2)+"-"+ ("0"+date.getDate()).slice(-2);
   // Add the exact date to each day of the week
    let str0 = "w"+ date.getDay().toString();
    let day = document.getElementById(str0);
    const br = document.createElement("br");
    const node = document.createTextNode(current_date);
    day.appendChild(br);
    day.appendChild(node);
  }

</script>
    </body>
  <p>   </p>
    <a class="center_box" href="../../home/hello">Back</a>
</html>
